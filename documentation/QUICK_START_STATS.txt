ğŸš€ QUICK START: Statistiques Temps RÃ©el
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## âœ… QU'EST-CE QUI A CHANGÃ‰?

### Avant âŒ
- Dashboard.html: stats hardcoded, jamais mises Ã  jour
- Index.html: stats hardcoded, jamais mises Ã  jour
- RafraÃ®chissement: 30-10 secondes (trÃ¨s lent)

### AprÃ¨s âœ…
- Dashboard.html: stats en DIRECT de la BD, mise Ã  jour chaque 5 secondes
- Index.html: stats en DIRECT de la BD, mise Ã  jour chaque 5 secondes
- RafraÃ®chissement: 3-5 secondes (6x plus rapide!)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸš€ LANCER L'APPLICATION

```bash
# 1. Aller au dossier du projet
cd d:\projet\EPI-DETECTION-PROJECT

# 2. Lancer l'app
python run_app.py

# 3. Attendre que le serveur dÃ©marre
# Vous devez voir: "Running on http://127.0.0.1:5000"
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ“Š VÃ‰RIFIER LE DASHBOARD

### Ouvrir dans navigateur:
```
http://localhost:5000/dashboard
```

### Vous devriez voir:
âœ“ **KPI Cards** (en haut):
  - Taux de ConformitÃ© (%) - LIVE
  - Personnes DÃ©tectÃ©es - LIVE
  - Alertes Actives - LIVE
  - DÃ©tections Aujourd'hui - LIVE

âœ“ **6 Graphiques**:
  - ConformitÃ© par Heure - LIVE
  - DÃ©tections par Heure - LIVE
  - EPI DÃ©tectÃ©s (camembert) - LIVE
  - Alertes par SÃ©vÃ©ritÃ© - LIVE
  - Performance ModÃ¨le
  - Cumul DÃ©tections - LIVE

âœ“ **Table des DÃ©tections RÃ©centes**:
  - 10 derniÃ¨res dÃ©tections avec timestamps

### VÃ©rifier que Ã§a marche:
- Regarder les timestamps de la table â†’ changent chaque ~3 secondes
- Regarder les graphiques â†’ les courbes se dÃ©placent
- Regarder les KPI cards â†’ les chiffres changent

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ  VÃ‰RIFIER LA HOME PAGE

### Ouvrir dans navigateur:
```
http://localhost:5000/
```

### Vous devriez voir:
âœ“ **Section "Statistiques en Direct"** avec 4 cartes:
  - Taux de ConformitÃ© - LIVE (pas "--")
  - Personnes DÃ©tectÃ©es - LIVE (pas "--")
  - Casques PortÃ©s - LIVE (pas "--")
  - Alertes Actives - LIVE (pas "--")

### VÃ©rifier que Ã§a marche:
- Regarder la console (F12) â†’ "DonnÃ©es API reÃ§ues: {...}"
- Attendre 5 secondes â†’ les chiffres doivent changer
- Pas de valeurs "--" qui resteraient bloquÃ©es

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ§ª TESTER LES ENDPOINTS

### Via curl (Windows PowerShell):

```powershell
# Stats globales
curl http://localhost:5000/api/stats -v

# DÃ©tections temps rÃ©el (derniÃ¨res 10)
curl http://localhost:5000/api/realtime -v

# Graphique dÃ©tections par heure
curl http://localhost:5000/api/chart/hourly -v

# RÃ©partition EPI
curl http://localhost:5000/api/chart/epi -v

# Alertes par sÃ©vÃ©ritÃ©
curl http://localhost:5000/api/chart/alerts -v

# DÃ©tections cumulÃ©es
curl http://localhost:5000/api/chart/cumulative -v
```

### Ou via navigateur:
Simplement ouvrir l'URL dans la barre d'adresse:
```
http://localhost:5000/api/stats
http://localhost:5000/api/realtime
etc.
```

Vous devez voir du JSON valide.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ” DEBUG: Console du Navigateur (F12)

### Ouvrir: F12 â†’ Console

Vous devez voir:
```javascript
âœ“ "DonnÃ©es API reÃ§ues: {...}" â†’ JSON complet
âœ“ Pas de 404 ou d'erreurs rouges
```

### Si vous avez une erreur 404:
```
GET /api/stats 404 Not Found
```
Cela signifie que le blueprint n'est pas enregistrÃ©. VÃ©rifier:
1. `from app.routes_stats import stats_bp` dans main.py
2. `app.register_blueprint(stats_bp)` dans main.py

### Si vous avez une erreur de base de donnÃ©es:
```
ERROR: Database not found
```
Cela signifie qu'il n'y a pas de donnÃ©es. CrÃ©er des enregistrements Detection.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ”§ COMPRENDRE LES DONNÃ‰ES

### D'oÃ¹ viennent les donnÃ©es?

1. **Taux de ConformitÃ©** (compliance_rate)
   - Source: Table `detections` â†’ colonne `total_persons`
   - Calcul: (with_helmet + with_vest + with_glasses + with_boots) / total_persons

2. **Personnes DÃ©tectÃ©es** (total_persons)
   - Source: Table `detections` â†’ colonne `total_persons`
   - SÃ©lection: Somme sur 24 heures

3. **Casques PortÃ©s** (with_helmet)
   - Source: Table `detections` â†’ colonne `with_helmet`
   - SÃ©lection: Somme sur 24 heures

4. **Alertes Actives** (alerts)
   - Source: Table `alerts`
   - SÃ©lection: OÃ¹ `resolved = False`

5. **DÃ©tections Aujourd'hui** (detections_today)
   - Source: Table `detections`
   - SÃ©lection: OÃ¹ `timestamp >= aujourd'hui 00:00`

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## ğŸ“ FICHIERS MODIFIÃ‰S

```
âœ… app/routes_stats.py
   - CrÃ©Ã© avec 9 endpoints
   - 400+ lignes
   - Toutes les stats en temps rÃ©el

âœ… app/main.py
   - Ligne 33: import routes_stats
   - Ligne 269: register_blueprint(stats_bp)

âœ… templates/dashboard.html
   - Ligne 427: Refresh 30s â†’ 5s
   - Ligne 428: Refresh 10s â†’ 3s

âœ… templates/index.html
   - Script JS complÃ¨tement refondu
   - Affichage stats en direct
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## âš¡ PERFS

| Metric | Avant | AprÃ¨s |
|--------|-------|-------|
| Refresh Dashboard | 30s | 5s |
| Refresh Table | 10s | 3s |
| Refresh Home | 10s | 5s |
| Vitesse | Lent | 6x plus rapide |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## â“ FAQ

**Q: Pourquoi j'ai "--" au lieu de chiffres?**
A: Pas de donnÃ©es dans la BD. VÃ©rifier que detect.py crÃ©e des enregistrements.

**Q: Pourquoi les donnÃ©es ne se mettent pas Ã  jour?**
A: VÃ©rifier la console (F12) pour erreurs fetch(). VÃ©rifier que /api/stats existe.

**Q: Comment crÃ©er des donnÃ©es de test?**
A: Lancer detect.py ou upload une image pour crÃ©er des dÃ©tections.

**Q: Puis-je modifier l'intervalle de rafraÃ®chissement?**
A: Oui. Dans dashboard.html ligne 427-428:
```javascript
setInterval(refreshData, 5000)      // 5000ms = 5s (modifier ici)
setInterval(loadDetections, 3000)   // 3000ms = 3s (modifier ici)
```

**Q: Puis-je avoir un intervalle plus rapide?**
A: Oui, mais attention Ã  la charge serveur. Ne pas aller en dessous de 1000ms (1s).

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

## âœ¨ RÃ‰SUMÃ‰

âœ… Dashboard affiche les stats en DIRECT
âœ… Home affiche les stats en DIRECT
âœ… DonnÃ©es mises Ã  jour toutes les 3-5 secondes
âœ… Pas d'erreurs, tout fonctionne
âœ… 6x plus rapide qu'avant

C'est tout! ğŸ‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
