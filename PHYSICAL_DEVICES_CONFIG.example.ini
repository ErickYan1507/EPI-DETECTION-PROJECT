# Configuration des Périphériques Physiques - Exemples
# Copier dans localStorage ou utiliser via API

# ============================================================
# EXEMPLE 1 : Arduino Seul (TinkerCAD)
# ============================================================
[Arduino_Only]
devices = {
    "arduino": true,
    "mqtt": false,
    "network": false,
    "bluetooth": false,
    "usb": false,
    "cloud": false
}

settings = {
    "arduino_port": "COM3",
    "mqtt_broker": "",
    "network_endpoint": "",
    "bluetooth_device": "",
    "usb_device_id": "",
    "cloud_config": "",
    "scan_interval": 5000,
    "connection_timeout": 10,
    "reconnect_attempts": 5
}

# ============================================================
# EXEMPLE 2 : MQTT + Réseau
# ============================================================
[MQTT_Network]
devices = {
    "arduino": false,
    "mqtt": true,
    "network": true,
    "bluetooth": false,
    "usb": false,
    "cloud": false
}

settings = {
    "arduino_port": "",
    "mqtt_broker": "broker.hivemq.com:1883",
    "network_endpoint": "http://sensor-api.local/data",
    "bluetooth_device": "",
    "usb_device_id": "",
    "cloud_config": "",
    "scan_interval": 5000,
    "connection_timeout": 10,
    "reconnect_attempts": 5
}

# ============================================================
# EXEMPLE 3 : Tous les Périphériques
# ============================================================
[All_Devices]
devices = {
    "arduino": true,
    "mqtt": true,
    "network": true,
    "bluetooth": true,
    "usb": true,
    "cloud": true
}

settings = {
    "arduino_port": "COM3",
    "mqtt_broker": "192.168.1.100:1883",
    "network_endpoint": "http://192.168.1.100:8000/api/sensors",
    "bluetooth_device": "00000000-1111-2222-3333-444444444444",
    "usb_device_id": "1234:5678",
    "cloud_config": "DefaultEndpointsProtocol=https;AccountName=...",
    "scan_interval": 5000,
    "connection_timeout": 10,
    "reconnect_attempts": 5
}

# ============================================================
# EXEMPLE 4 : Chantier de Construction
# ============================================================
[Construction_Site]
devices = {
    "arduino": true,
    "mqtt": true,
    "network": false,
    "bluetooth": true,
    "usb": false,
    "cloud": true
}

settings = {
    "arduino_port": "COM3",
    "mqtt_broker": "mqtt.construction.local:1883",
    "network_endpoint": "",
    "bluetooth_device": "BLE-TRACKER-001",
    "usb_device_id": "",
    "cloud_config": "HostName=iot-hub.azure-devices.net;SharedAccessKeyName=owner",
    "scan_interval": 5000,
    "connection_timeout": 10,
    "reconnect_attempts": 5
}

# ============================================================
# EXEMPLE 5 : Usine / Atelier
# ============================================================
[Factory_Workshop]
devices = {
    "arduino": true,
    "mqtt": true,
    "network": true,
    "bluetooth": false,
    "usb": false,
    "cloud": true
}

settings = {
    "arduino_port": "COM4",
    "mqtt_broker": "mqtt.factory.local:8883",  # TLS
    "network_endpoint": "http://factory-api.local/sensors",
    "bluetooth_device": "",
    "usb_device_id": "",
    "cloud_config": "AKIAIOSFODNN7EXAMPLE",
    "scan_interval": 2000,     # Plus rapide pour détection immédiate
    "connection_timeout": 5,
    "reconnect_attempts": 10
}

# ============================================================
# EXEMPLE 6 : Laboratoire
# ============================================================
[Laboratory]
devices = {
    "arduino": false,
    "mqtt": true,
    "network": true,
    "bluetooth": false,
    "usb": true,
    "cloud": true
}

settings = {
    "arduino_port": "",
    "mqtt_broker": "lab-mqtt.university.edu:1883",
    "network_endpoint": "http://lab-lims.university.edu/api/sensors",
    "bluetooth_device": "",
    "usb_device_id": "0957:4B3B",   # Agilent USB analyzer
    "cloud_config": "service-account-key.json",
    "scan_interval": 10000,    # Plus lent, moins critique
    "connection_timeout": 20,
    "reconnect_attempts": 3
}

# ============================================================
# EXEMPLE 7 : Minimal (Bureau/Test)
# ============================================================
[Minimal]
devices = {
    "arduino": false,
    "mqtt": false,
    "network": true,
    "bluetooth": false,
    "usb": false,
    "cloud": false
}

settings = {
    "arduino_port": "",
    "mqtt_broker": "",
    "network_endpoint": "http://localhost:5000/api/test",
    "bluetooth_device": "",
    "usb_device_id": "",
    "cloud_config": "",
    "scan_interval": 10000,
    "connection_timeout": 5,
    "reconnect_attempts": 2
}

# ============================================================
# REMARQUES IMPORTANTES
# ============================================================

# 1. PORTS SÉRIE (Arduino)
#    - Windows: COM1, COM2, COM3, COM4, ...
#    - Linux:   /dev/ttyUSB0, /dev/ttyACM0, ...
#    - macOS:   /dev/cu.usbserial-*

# 2. MQTT BROKERS PUBLICS (TESTS)
#    - broker.hivemq.com:1883
#    - test.mosquitto.org:1883
#    - iot.eclipse.org:1883

# 3. USB DEVICE IDs
#    - Format: VENDOR_ID:PRODUCT_ID
#    - Exemples:
#      1234:5678      - Capteur générique
#      0957:4B3B      - Agilent USB analyzer
#      1366:0101      - STM32 USB device

# 4. BLUETOOTH DEVICE UUIDs
#    - Format: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
#    - Obtenez avec: navigator.bluetooth.getDevices()

# 5. CLOUD CONFIGS
#    - Azure: Connection String format
#    - AWS: Access Key ID + Secret
#    - GCP: Service Account JSON

# 6. INTERVALLES DE SCAN
#    - 1000-2000 ms   : Très réactif (haute CPU)
#    - 5000 ms        : Équilibré (défaut)
#    - 10000+ ms      : Économe (moins précis)

# ============================================================
# SCRIPT PYTHON POUR CHARGER LA CONFIG
# ============================================================

'''
import json
import requests

# Charger config depuis fichier
with open('physical_devices_config.ini', 'r') as f:
    config_text = f.read()
    # Parser INI (nécessite configparser)

# Ou charger depuis API
response = requests.post(
    'http://localhost:5000/api/physical/config',
    json=config_dict
)

# Résultat
print(response.json())
'''

# ============================================================
# SCRIPT JAVASCRIPT POUR TESTER DEPUIS LE NAVIGATEUR
# ============================================================

'''
// Récupérer la config sauvegardée
const config = JSON.parse(localStorage.getItem('physicalDevicesConfig'));
console.log('Configuration actuelle:', config);

// Tester Arduino
fetch('/api/physical/arduino/test', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
        port: config.settings.arduino_port 
    })
}).then(r => r.json()).then(console.log);

// Tester MQTT
fetch('/api/physical/mqtt/test', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
        broker: config.settings.mqtt_broker 
    })
}).then(r => r.json()).then(console.log);

// Tester HTTP
fetch('/api/physical/network/test', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
        endpoint: config.settings.network_endpoint 
    })
}).then(r => r.json()).then(console.log);
'''
